<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="styles.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Voice Tray</title>
    <script type="module" src="/main.js" defer></script>
  </head>

  <body>
    <div class="container">
      <header>
        <h1>Voice Timeline</h1>
        <div class="header-right">
          <div class="mqtt-status" id="mqtt-status" title="MQTT: connecting...">
            <span class="mqtt-icon">⚡</span>
            <span class="mqtt-label" id="mqtt-label"></span>
          </div>
          <button id="settings-btn" class="btn-icon" title="Settings">⚙️</button>
          <div class="status" id="status">
            <span class="status-dot"></span>
            <span id="status-text">Idle</span>
          </div>
        </div>
      </header>

      <!-- Timeline View -->
      <div id="timeline-view">
        <div class="timeline" id="timeline">
          <!-- Voice entries will be inserted here -->
          <div class="empty-state">No voice messages yet</div>
        </div>

        <footer>
          <button id="clear-btn" class="btn-secondary">Clear Done</button>
          <button id="test-btn" class="btn-primary">Test Voice</button>
        </footer>
      </div>

      <!-- Settings View -->
      <div id="settings-view" class="hidden">
        <div class="settings-form">
          <h2>MQTT Settings</h2>

          <div class="form-group">
            <label for="broker">Broker</label>
            <input type="text" id="broker" placeholder="127.0.0.1" />
          </div>

          <div class="form-group">
            <label for="port">Port</label>
            <input type="number" id="port" placeholder="1883" min="1" max="65535" />
          </div>

          <div class="form-group">
            <label for="topic-speak">Speak Topic</label>
            <input type="text" id="topic-speak" placeholder="voice/speak" />
          </div>

          <div class="form-group">
            <label for="topic-status">Status Topic</label>
            <input type="text" id="topic-status" placeholder="voice/status" />
          </div>

          <details class="auth-section">
            <summary>Authentication (optional)</summary>
            <div class="form-group">
              <label for="username">Username</label>
              <input type="text" id="username" placeholder="" autocomplete="off" />
            </div>
            <div class="form-group">
              <label for="password">Password</label>
              <input type="password" id="password" placeholder="" autocomplete="off" />
            </div>
          </details>

          <div id="settings-message" class="settings-message hidden"></div>
        </div>

        <footer>
          <button id="cancel-btn" class="btn-secondary">Cancel</button>
          <button id="save-btn" class="btn-primary">Save</button>
        </footer>
      </div>
    </div>
  </body>
</html>
